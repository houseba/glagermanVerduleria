<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="/Users/seba/development/POSGlagerman/negocioGlagerman.db" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="1"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="2182"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><table title="producto" custom_title="0" dock_id="3" table="4,8:mainproducto"/><dock_state state="000000ff00000000fd0000000100000002000003b30000034cfc0100000003fb000000160064006f0063006b00420072006f00770073006500310100000000000001c30000000000000000fb000000160064006f0063006b00420072006f00770073006500320100000000ffffffff0000000000000000fb000000160064006f0063006b00420072006f00770073006500330100000000000003b30000010100ffffff000002980000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="ajuste_inventario" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="68"/><column index="2" value="89"/><column index="3" value="128"/><column index="4" value="92"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="categoria" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="89"/><column index="2" value="127"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="producto" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="88"/><column index="2" value="125"/><column index="3" value="150"/><column index="4" value="92"/><column index="6" value="90"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 1*">-- Tabla proveedor
CREATE TABLE proveedor (
    rut_proveedor TEXT PRIMARY KEY CHECK(length(rut_proveedor) &lt;= 12),
    nombre_proveedor TEXT NOT NULL CHECK(length(nombre_proveedor) &lt;= 50),
    direccion_proveedor TEXT CHECK(length(direccion_proveedor) &lt;= 100),
    contacto_proveedor TEXT NOT NULL CHECK(length(contacto_proveedor) &lt;= 50)
);

-- Tabla categoria
CREATE TABLE categoria (
    id_categoria INTEGER PRIMARY KEY,
    nombre_categoria TEXT NOT NULL CHECK(length(nombre_categoria) &lt;= 30)
);

-- Tabla producto
CREATE TABLE producto (
    id_producto INTEGER PRIMARY KEY,
    nombre_producto TEXT NOT NULL CHECK(length(nombre_producto) &lt;= 50),
    precio_unitario_venta INTEGER NOT NULL CHECK(precio_unitario_venta &gt;= 0),
    stock_actual INTEGER NOT NULL CHECK(stock_actual &gt;= 0),
    stock_minimo INTEGER NOT NULL CHECK(stock_minimo &gt;= 0),
    id_categoria INTEGER NOT NULL,
    FOREIGN KEY (id_categoria) REFERENCES categoria(id_categoria)
);

-- Tabla compra
CREATE TABLE compra (
    id_compra INTEGER PRIMARY KEY,
    fecha_compra DATETIME NOT NULL,
    rut_proveedor TEXT NOT NULL,
    FOREIGN KEY (rut_proveedor) REFERENCES proveedor(rut_proveedor)
);

-- Tabla detalle_compra
CREATE TABLE detalle_compra (
    id_detalle_compra INTEGER PRIMARY KEY,
    id_compra INTEGER NOT NULL,
    id_producto INTEGER NOT NULL,
    cantidad_compra INTEGER NOT NULL CHECK(cantidad_compra &gt;= 1),
    precio_unitario_compra INTEGER NOT NULL CHECK(precio_unitario_compra &gt;= 0),
    FOREIGN KEY (id_compra) REFERENCES compra(id_compra),
    FOREIGN KEY (id_producto) REFERENCES producto(id_producto)
);

-- Tabla venta
CREATE TABLE venta (
    id_venta INTEGER PRIMARY KEY,
    fecha_venta DATETIME NOT NULL,
    total_venta INTEGER NOT NULL CHECK(total_venta &gt;= 0)
);

-- Tabla detalle_venta
CREATE TABLE detalle_venta (
    id_detalle_venta INTEGER PRIMARY KEY,
    id_venta INTEGER NOT NULL,
    id_producto INTEGER NOT NULL,
    cantidad_venta INTEGER NOT NULL CHECK(cantidad_venta &gt;= 1),
    precio_unitario_venta INTEGER NOT NULL CHECK(precio_unitario_venta &gt;= 0),
    FOREIGN KEY (id_venta) REFERENCES venta(id_venta),
    FOREIGN KEY (id_producto) REFERENCES producto(id_producto)
);

-- Tabla ajuste_inventario
CREATE TABLE ajuste_inventario (
    id_ajuste INTEGER PRIMARY KEY,
    id_producto INTEGER NOT NULL,
    cantidad_ajustada INTEGER NOT NULL,
    fecha_ajuste DATETIME NOT NULL,
    motivo_ajuste TEXT NOT NULL CHECK(length(motivo_ajuste) &lt;= 100),
    FOREIGN KEY (id_producto) REFERENCES producto(id_producto)
);

INSERT INTO categoria VALUES
	(1, 'Verduras'),
	(2, 'Frutas');
	
INSERT INTO producto VALUES
	(1, 'Tomate', 1200, 150, 30, 1),
    (2, 'Papa', 600, 300, 50, 1),
    (3, 'Zanahoria', 600, 100, 20, 1),
    (4, 'Manzana', 1000, 120, 25, 2),
    (5, 'Lechuga', 700, 60, 15, 1);</sql><current_tab id="0"/></tab_sql></sqlb_project>
